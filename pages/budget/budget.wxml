<view class="container">
  <!-- æœˆä»½é€‰æ‹©å™¨ -->
  <view class="month-selector">
    <picker mode="date" fields="month" value="{{selectedMonth}}" bindchange="onMonthChange">
      <view class="month-picker">
        <text>{{selectedMonth || 'é€‰æ‹©æœˆä»½'}}</text>
        <text class="icon">â–¼</text>
      </view>
    </picker>
  </view>

  <!-- æ”¯å‡ºé¢„ç®— -->
  <view class="section">
    <view class="section-title">æ”¯å‡ºé¢„ç®—</view>
    <view class="budget-list">
      <view class="budget-item" wx:for="{{expenseCategories}}" wx:key="name">
        <view class="category-info">
          <text class="icon">{{categoryIcons.expense[item] || 'ğŸ“Š'}}</text>
          <text class="name">{{item}}</text>
        </view>
        <view class="budget-edit-box">
          <input 
            class="budget-input" 
            type="digit" 
            value="{{editingValue[item] !== undefined ? editingValue[item] : (budgets.expense[item][selectedMonth] || '')}}" 
            placeholder="è®¾ç½®é¢„ç®—" 
            bindinput="onBudgetInput" 
            data-category="{{item}}"
          />
          <text class="unit">å…ƒ</text>
        </view>
      </view>
    </view>
    <view style="margin: 32rpx 0 0 0; text-align: center;">
      <button class="budget-btn" style="width: 60%;" bindtap="saveAllBudgets">ä¿å­˜æœ¬æœˆé¢„ç®—</button>
    </view>
  </view>

  <!-- é¢„ç®—ä½¿ç”¨æƒ…å†µ -->
  <view class="section" wx:if="{{selectedMonth}}">
    <view class="section-title">é¢„ç®—ä½¿ç”¨æƒ…å†µï¼ˆ{{selectedMonth}}ï¼‰</view>
    <view class="budget-usage">
      <view class="usage-item" wx:for="{{budgetUsage}}" wx:key="category">
        <view class="usage-info">
          <text class="icon">{{item.icon}}</text>
          <text class="name">{{item.category}}</text>
        </view>
        <view class="usage-data">
          <text class="budget">é¢„ç®—: Â¥{{item.budget || 'æœªè®¾ç½®'}}</text>
          <text class="actual">å®é™…: Â¥{{item.actual}}</text>
          <text class="status {{item.status}}">{{item.statusText}}</text>
        </view>
      </view>
      <view wx:if="{{budgetUsage.length === 0}}" class="empty-budget">æœ¬æœˆæœªè®¾ç½®é¢„ç®—</view>
    </view>
  </view>
</view> 